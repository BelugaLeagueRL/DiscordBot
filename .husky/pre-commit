# This file is generated by Husky

echo "ğŸ”§ Running pre-commit quality checks..."

# ZERO TOLERANCE - FAIL FAST APPROACH
if [ "$SKIP_LINT" != "1" ]; then
  echo "ğŸ“ Running lint-staged (ESLint + Prettier)..."
  npx lint-staged --verbose
else
  echo "â­ï¸  Skipping lint-staged (SKIP_LINT=1)"
fi

if [ "$SKIP_TYPECHECK" != "1" ]; then
  echo "ğŸ” Running TypeScript compilation check..."
  npm run typecheck
else
  echo "â­ï¸  Skipping TypeScript check (SKIP_TYPECHECK=1)"
fi

if [ "$SKIP_TYPE_COVERAGE" != "1" ]; then
  echo "ğŸ“Š Running type coverage check..."
  npm run type-coverage
else
  echo "â­ï¸  Skipping type coverage (SKIP_TYPE_COVERAGE=1)"
fi

if [ "$SKIP_ANTIPATTERN" != "1" ]; then
  echo "ğŸ›¡ï¸  Running anti-pattern detection..."
  npm run antipattern:check
else
  echo "â­ï¸  Skipping anti-pattern check (SKIP_ANTIPATTERN=1)"
fi

if [ "$SKIP_COVERAGE" != "1" ]; then
  echo "ğŸ§ª Running test coverage check (90% threshold)..."
  npm run test:coverage-check
else
  echo "â­ï¸  Skipping coverage check (SKIP_COVERAGE=1)"
fi

echo "âœ… Pre-commit checks completed!"
